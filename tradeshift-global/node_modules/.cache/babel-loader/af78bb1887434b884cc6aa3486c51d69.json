{"ast":null,"code":"'use stric';\n\nimport data from './data/searchResults.json';\nimport countries from './data/countries.json';\nconsole.log(data);\nconst REQUEST_HOLD_TIME = 1000;\n\nasync function searchForCountry(searchText, countryCode) {\n  return new Promise((resolve, _reject) => {\n    setTimeout(() => {\n      let countryNames = [];\n\n      if (countryCode) {\n        countryNames = countries.filter(c => c.code == countryCode);\n      }\n\n      console.log('found country', countryNames);\n      const results = data.filter(d => {\n        if (countryCode) {\n          if (countryNames && countryNames.length == 1) {\n            return d.name.toLowerCase().includes(searchText.toLowerCase()) && countryNames[0].name.includes(d.country.toLowerCase());\n          } else {\n            return false;\n          }\n        } else return d.name.toLowerCase().startsWith(searchText.toLowerCase());\n      });\n      console.log('--------Results------------');\n      console.log(results);\n      resolve(results);\n    }, REQUEST_HOLD_TIME);\n  });\n}\n\nasync function getCountries() {\n  return new Promise((resolve, _reject) => {\n    setTimeout(() => {\n      console.log('Countries ------------');\n      console.log(countries);\n      resolve(countries);\n    }, REQUEST_HOLD_TIME);\n  });\n}\n\nexport const defaultHeaders = {\n  \"Content-Type\": \"application/json\",\n  \"Authorization\": \"\"\n};\nexport default async function Api({\n  url,\n  method = 'GET',\n  data,\n  headers = defaultHeaders\n}) {\n  console.log(`-------request url------${url}`);\n  console.log('------request data-------');\n  console.log(data);\n\n  if (url === 'searchcountry') {\n    console.log('invokeing call');\n    return searchForCountry(data.searchText, data.countryCode);\n  } else if (url === 'getcountries') {\n    return getCountries();\n  } else {\n    return [];\n  }\n}","map":{"version":3,"sources":["/Users/rthota/Downloads/tradeshift fe tech challenge/tradeshift-global/src/components/fetch.js"],"names":["data","countries","console","log","REQUEST_HOLD_TIME","searchForCountry","searchText","countryCode","Promise","resolve","_reject","setTimeout","countryNames","filter","c","code","results","d","length","name","toLowerCase","includes","country","startsWith","getCountries","defaultHeaders","Api","url","method","headers"],"mappings":"AAAA;;AAEA,OAAOA,IAAP,MAAiB,2BAAjB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACAC,OAAO,CAACC,GAAR,CAAYH,IAAZ;AAEA,MAAMI,iBAAiB,GAAG,IAA1B;;AAEA,eAAeC,gBAAf,CAAgCC,UAAhC,EAA4CC,WAA5C,EAAyD;AACrD,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,OAAV,KAAsB;AACrCC,IAAAA,UAAU,CAAC,MAAM;AACb,UAAIC,YAAY,GAAG,EAAnB;;AACA,UAAGL,WAAH,EAAgB;AACZK,QAAAA,YAAY,GAAGX,SAAS,CAACY,MAAV,CAAiBC,CAAC,IAAIA,CAAC,CAACC,IAAF,IAAUR,WAAhC,CAAf;AACH;;AACDL,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BS,YAA7B;AAEA,YAAMI,OAAO,GAAGhB,IAAI,CAACa,MAAL,CAAYI,CAAC,IAAI;AAC7B,YAAIV,WAAJ,EAAiB;AACb,cAAIK,YAAY,IAAIA,YAAY,CAACM,MAAb,IAAuB,CAA3C,EAA8C;AAC1C,mBAAOD,CAAC,CAACE,IAAF,CAAOC,WAAP,GAAqBC,QAArB,CAA8Bf,UAAU,CAACc,WAAX,EAA9B,KACHR,YAAY,CAAC,CAAD,CAAZ,CAAgBO,IAAhB,CAAqBE,QAArB,CAA8BJ,CAAC,CAACK,OAAF,CAAUF,WAAV,EAA9B,CADJ;AAEH,WAHD,MAGO;AACH,mBAAO,KAAP;AACH;AACJ,SAPD,MASI,OAAOH,CAAC,CAACE,IAAF,CAAOC,WAAP,GAAqBG,UAArB,CAAgCjB,UAAU,CAACc,WAAX,EAAhC,CAAP;AACP,OAXe,CAAhB;AAYAlB,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYa,OAAZ;AACAP,MAAAA,OAAO,CAACO,OAAD,CAAP;AACH,KAtBS,EAsBPZ,iBAtBO,CAAV;AAuBH,GAxBM,CAAP;AAyBH;;AAED,eAAeoB,YAAf,GAA8B;AAC1B,SAAO,IAAIhB,OAAJ,CAAY,CAACC,OAAD,EAAUC,OAAV,KAAsB;AACrCC,IAAAA,UAAU,CAAC,MAAM;AACbT,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;AACAQ,MAAAA,OAAO,CAACR,SAAD,CAAP;AACH,KAJS,EAIPG,iBAJO,CAAV;AAKH,GANM,CAAP;AAOH;;AAED,OAAO,MAAMqB,cAAc,GAAG;AAC1B,kBAAgB,kBADU;AAE1B,mBAAiB;AAFS,CAAvB;AAKP,eAAe,eAAeC,GAAf,CAAmB;AAC9BC,EAAAA,GAD8B;AAE9BC,EAAAA,MAAM,GAAG,KAFqB;AAG9B5B,EAAAA,IAH8B;AAI9B6B,EAAAA,OAAO,GAAGJ;AAJoB,CAAnB,EAKZ;AACCvB,EAAAA,OAAO,CAACC,GAAR,CAAa,2BAA0BwB,GAAI,EAA3C;AACAzB,EAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AACA,MAAI2B,GAAG,KAAK,eAAZ,EAA6B;AACzBzB,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,WAAOE,gBAAgB,CAACL,IAAI,CAACM,UAAN,EAAkBN,IAAI,CAACO,WAAvB,CAAvB;AACH,GAHD,MAGO,IAAIoB,GAAG,KAAK,cAAZ,EAA4B;AAC/B,WAAOH,YAAY,EAAnB;AACH,GAFM,MAEA;AACH,WAAO,EAAP;AACH;AACJ","sourcesContent":["'use stric';\n\nimport data from './data/searchResults.json'\nimport countries from './data/countries.json'\nconsole.log(data);\n\nconst REQUEST_HOLD_TIME = 1000;\n\nasync function searchForCountry(searchText, countryCode) {\n    return new Promise((resolve, _reject) => {\n        setTimeout(() => {\n            let countryNames = [];\n            if(countryCode) {\n                countryNames = countries.filter(c => c.code == countryCode);\n            }\n            console.log('found country', countryNames);\n            \n            const results = data.filter(d => {\n                if (countryCode) {\n                    if (countryNames && countryNames.length == 1) {\n                        return d.name.toLowerCase().includes(searchText.toLowerCase()) &&\n                            countryNames[0].name.includes(d.country.toLowerCase())\n                    } else {\n                        return false;\n                    }\n                }\n                else\n                    return d.name.toLowerCase().startsWith(searchText.toLowerCase());\n            })\n            console.log('--------Results------------');\n            console.log(results);\n            resolve(results);\n        }, REQUEST_HOLD_TIME)\n    });\n}\n\nasync function getCountries() {\n    return new Promise((resolve, _reject) => {\n        setTimeout(() => {\n            console.log('Countries ------------');\n            console.log(countries);\n            resolve(countries);\n        }, REQUEST_HOLD_TIME)\n    })\n}\n\nexport const defaultHeaders = {\n    \"Content-Type\": \"application/json\",\n    \"Authorization\": \"\"\n};\n\nexport default async function Api({\n    url,\n    method = 'GET',\n    data,\n    headers = defaultHeaders,\n}) {\n    console.log(`-------request url------${url}`);\n    console.log('------request data-------');\n    console.log(data);\n    if (url === 'searchcountry') {\n        console.log('invokeing call')\n        return searchForCountry(data.searchText, data.countryCode);\n    } else if (url === 'getcountries') {\n        return getCountries();\n    } else {\n        return []\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}